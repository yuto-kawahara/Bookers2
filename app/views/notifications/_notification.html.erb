<div>
  <span>
    <% visitor = notification.visitor %>
    <% visited = notification.visited %>
    <%= link_to user_path(visitor) do %>
      <%= attachment_image_tag visitor, :profile_image, :fill, 40, 40, fallback: "no_image.jpg", size:"40x40", class: "rounded-circle bd-placeholder-img align-self-center mx-3"%>
      <strong><%= visitor.name %></strong>
    <% end %>
    <%= "さんが" %>
    <% case notification.action %>
      <% when 'follow' then %>
        <%="あなたをフォローしました"%> 
      <% when 'favorite' then %>
        <%= link_to 'あなたの投稿', notification.book, style: "font-weight: bold;" %> 
        <%= "にいいねしました" %>
      <% when 'comment' then %>
        <% if notification.book.user_id == visited.id %>
          <%= link_to "あなたの投稿", notification.book, style: "font-weight: bold;" %>
        <% else %>
          <span>
            <%= link_to book_path(notification.book) do %>
              <%= attachment_image_tag notification.book.user, :profile_image, :fill, 40, 40, fallback: "no_image.jpg", size:"40x40", class: "rounded-circle bd-placeholder-img align-self-center mx-3"%>
              <strong><%= notification.book.user.name + 'さんの投稿' %></strong>
            <% end %>
          </span>  
        <% end %>
        <%= "にコメントしました" %>
        <p><%=BookComment.find_by(id: notification.book_comment_id)&.comment %></p>
    <% end %>
  </span>
</div>